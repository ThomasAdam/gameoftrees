.\"
.\" Copyright (c) 2017 Martin Pieuchot
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate$
.Dt GOT 1
.Os
.Sh NAME
.Nm got
.Nd version control system
.Sh SYNOPSIS
.Nm
.Ar command
.Op Fl h
.Op Ar arg ...
.Sh DESCRIPTION
.Nm
is a version control system which prioritizes ease of use and simplicity
over flexibility.
.Pp
.Nm
stores the history of tracked files in a repository which happens to use
the same on-disk format as
.Dq bare
repositories used by the popular Git version control system.
This repository format is described in
.Xr got-repository 5 .
.Pp
.Nm
is a
.Em distributed
version control system because every copy of a repository is writeable.
Modifications made to files can be synchronized between repositories
at any time.
.Pp
Files managed by
.Nm
must be checked out from the repository for modification.
Checked out files are stored in a
.Em work tree
which can be placed at an arbitrary directory in the filesystem hierarchy.
The on-disk format of a
.Nm
work tree is described in
.Xr got-worktree 5 .
.Pp
.Nm
provides global and command-specific options.
Global options must preceed the command name, and are as follows:
.Bl -tag -width tenletters
.It Fl h
Display usage information.
.El
.Pp
The commands are as follows:
.Bl -tag -width checkout
.It Cm checkout [ Fl p Ar path-prefix ] repository-path [ work-tree-path ]
Copy files from a repository into a new work tree.
The work tree may be restricted to a subset of the repository's tree
hierarchy by specifying the
.Fl p Ar path-prefix
option.
In this case, only files beneath the specified prefix will
be checked out.
If the
.Ar work tree path
is not specified, either use the base name of the
.Ar repository path ,
or if a
.Ar path prefix
was specified use the base name of the
.Ar path prefix .
.\".It Cm status
.\"Show current status of files.
.It Cm log [ Fl p ] [ Fl c Ar commit ] [ Fl l Ar N ] [ Ar repository-path ]
Display history of the repository.
If the
.Fl p
option is given, display the patch of modifications made in each commit.
If a
.Ar commit
is specified with the
.Fl c
option, start traversing history at this commit.
The
.Fl l
option limits the output to a number of
.Ar N
commits.
If the
.Ar repository path
is omitted, use the current working directory.
.It Cm diff [ Ar repository-path ] Ar object1 Ar object2
Display the differences between two objects in the repository.
Both objects must be of the same type (blobs, trees, or commits).
If the
.Ar repository path
is omitted, use the current working directory.
.El
.Sh EXIT STATUS
.Ex -std got
.Sh EXAMPLES
Check out a work tree of
.Ox
kernel sources from a Git repository at /var/repo/openbsd-src to ~/sys:
.Pp
.Dl $ got checkout -p sys /var/repo/openbsd-src ~/sys
.Sh SEE ALSO
.Xr got-repository 5
.Xr got-worktree 5
